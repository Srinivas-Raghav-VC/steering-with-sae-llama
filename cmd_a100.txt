# A100: anchor (layer 20 full data)
python3 he_steer_pipeline.py --layers 20 --train-epochs 120 --samples-per-language 12000 --max-seq-length 512 --mode shadow_hindi --steer-alpha 2.2 --norm-clamp-ratio 0.35 --intervention-scope sequence --top-k-per-layer 48 --eval-prompts 64 --feature-ranking causal --a100 && python3 rescore_results.py he_pipeline_results/results_sae_only.json && python3 tools/gemini_judge.py --results he_pipeline_results/results_sae_only.json --out he_pipeline_results/llm_judge_gemini.json --update-results --cache he_pipeline_results/judge_cache.json && python3 tools/label_features_llm.py --mine-top-texts --limit 150 && python3 tools/make_report.py --results_dir he_pipeline_results && python3 tools/export_bias_eval.py --results he_pipeline_results/results_sae_only.json
# Optional external audits (uncomment and adjust paths)
# python3 <path_to_hi-en-bias-eval>/score.py --inputs he_pipeline_results/bias_eval/steered_outputs.tsv --out he_pipeline_results/bias_eval/hi_en_bias.json
# python3 <MIPE_REPO>/mipe_eval.py --inputs he_pipeline_results/bias_eval/steered_outputs.jsonl --out he_pipeline_results/bias_eval/mipe_scores.json

# A100: adjacent single (layer 19)
python3 he_steer_pipeline.py --layers 19 --train-epochs 120 --samples-per-language 12000 --max-seq-length 512 --mode shadow_hindi --steer-alpha 2.2 --norm-clamp-ratio 0.35 --intervention-scope sequence --top-k-per-layer 48 --eval-prompts 64 --feature-ranking causal --a100 && python3 rescore_results.py he_pipeline_results/results_sae_only.json && python3 tools/gemini_judge.py --results he_pipeline_results/results_sae_only.json --out he_pipeline_results/llm_judge_gemini.json --update-results --cache he_pipeline_results/judge_cache.json && python3 tools/label_features_llm.py --mine-top-texts --limit 150 && python3 tools/make_report.py --results_dir he_pipeline_results && python3 tools/export_bias_eval.py --results he_pipeline_results/results_sae_only.json

# A100: minimal pair (if singles succeed)
python3 he_steer_pipeline.py --layers 19,20 --train-epochs 120 --samples-per-language 12000 --max-seq-length 512 --mode shadow_hindi --steer-alpha 2.2 --norm-clamp-ratio 0.35 --intervention-scope sequence --top-k-per-layer 32 --feature-ranking causal --a100 && python3 rescore_results.py he_pipeline_results/results_sae_only.json && python3 tools/gemini_judge.py --results he_pipeline_results/results_sae_only.json --out he_pipeline_results/llm_judge_gemini.json --update-results --cache he_pipeline_results/judge_cache.json && python3 tools/label_features_llm.py --mine-top-texts --limit 150 && python3 tools/make_report.py --results_dir he_pipeline_results && python3 tools/export_bias_eval.py --results he_pipeline_results/results_sae_only.json

# A100: wide mid-band (for multi-attribute stress)
python3 he_steer_pipeline.py --layers 18,19,20,21,22 --train-epochs 120 --samples-per-language 12000 --mode shadow_hindi --steer-alpha 2.2 --norm-clamp-ratio 0.35 --intervention-scope sequence --top-k-per-layer 32 --feature-ranking causal --a100 && python3 rescore_results.py he_pipeline_results/results_sae_only.json && python3 tools/gemini_judge.py --results he_pipeline_results/results_sae_only.json --out he_pipeline_results/llm_judge_gemini.json --update-results --cache he_pipeline_results/judge_cache.json && python3 tools/label_features_llm.py --mine-top-texts --limit 150 && python3 tools/make_report.py --results_dir he_pipeline_results && python3 tools/export_bias_eval.py --results he_pipeline_results/results_sae_only.json

# A100: triple (only if pair improved)
python3 he_steer_pipeline.py --layers 19,20,21 --train-epochs 120 --samples-per-language 12000 --mode shadow_hindi --steer-alpha 2.1 --norm-clamp-ratio 0.35 --intervention-scope sequence --top-k-per-layer 32 --feature-ranking causal --a100 && python3 rescore_results.py he_pipeline_results/results_sae_only.json && python3 tools/gemini_judge.py --results he_pipeline_results/results_sae_only.json --out he_pipeline_results/llm_judge_gemini.json --update-results --cache he_pipeline_results/judge_cache.json && python3 tools/label_features_llm.py --mine-top-texts --limit 150 && python3 tools/make_report.py --results_dir he_pipeline_results && python3 tools/export_bias_eval.py --results he_pipeline_results/results_sae_only.json

# A100: late-layer comparison baseline
python3 he_steer_pipeline.py --layers 29,30,31 --train-epochs 120 --samples-per-language 12000 --mode shadow_hindi --steer-alpha 2.2 --norm-clamp-ratio 0.35 --intervention-scope sequence --top-k-per-layer 48 --eval-prompts 64 --feature-ranking causal --a100 && python3 rescore_results.py he_pipeline_results/results_sae_only.json && python3 tools/gemini_judge.py --results he_pipeline_results/results_sae_only.json --out he_pipeline_results/llm_judge_gemini.json --update-results --cache he_pipeline_results/judge_cache.json && python3 tools/label_features_llm.py --mine-top-texts --limit 150 && python3 tools/make_report.py --results_dir he_pipeline_results && python3 tools/export_bias_eval.py --results he_pipeline_results/results_sae_only.json
